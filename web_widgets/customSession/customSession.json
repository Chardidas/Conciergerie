{"designerVersion":"1.2.9","favorite":false,"id":"customSession","name":"session","lastUpdate":1519128112856,"template":"<style>\n    .login{\n        margin:10px;\n    }\n</style>\n\n<div class=\"text-{{ properties.alignment }}\">\n    \n    <span style=\"display:inline-block; margin: 10px;\">{{firstName}} {{lastName}}</span>\n    <img ng-if=\"icon\" ng-src=\"{{ icon }}\" class=\"img-responsive\" style=\"max-width: 40px;display:inline-block;\"/>\n    <a ng-click=\"logout()\" ng-class=\"'btn btn-' + properties.buttonStyle\" >{{properties.value}}</a>\n</div>\n\n\n","controller":"/**\n * Controller is a javascript function that augment the AngularJS scope and expose functions that can be used in custom widget template.\n * \n * Custom widget properties created on the right panel can be used as variables in controller with $scope.properties.\n * To use AngularJS standard services you must declare them into the main function arguments. \n * \n * You can leave the controller empty if you don't need it.\n */\nfunction WidgetsimpleButtonController($scope, $http, $location) {\n   'use strict';\n  var ctrl = this;\n  \n   function getSession() {\n       return  $http.get('/bonita/API/system/session/unusedid');\n    }\n    \n    function getUser(id) {\n        $http.get('/bonita/API/identity/user/'+id).success(function(data){\n            $scope.firstName = data.firstname;\n            $scope.lastName = data.lastname;\n            $scope.icon = \"/bonita/portal/images/avatar-default.gif\";\n        });\n    }\n    \n   getSession().then(function(response) {\n        var session = response.data;\n        getUser(session.user_id);\n   });\n   \n   $scope.logout = function(){\n     $http.get('/bonita/logoutservice').\n      success(function(data, status, headers, config) {\n        window.top.location.href = \"/bonita/login.jsp?redirectUrl=%2Fbonita%2Fapps%2Fconciergerie%2Faccueil%2F\";\n      });\n  };\n   \n}","custom":true,"properties":[{"label":"Value","name":"value","type":"text","defaultValue":"Logout","bond":"expression"},{"label":"Alignment","name":"alignment","type":"choice","defaultValue":"right","choiceValues":["left","center","right"],"bond":"expression"},{"label":"Button Style","name":"buttonStyle","type":"choice","defaultValue":"danger","choiceValues":["default","primary","success","info","warning","danger","link"],"bond":"expression"}],"assets":[],"type":"widget"}