{"designerVersion":"1.3.25","favorite":false,"id":"1dd01536-e69a-41e9-b314-65f7ac5f825d","name":"demandeServiceFragment","type":"fragment","lastUpdate":1517499055602,"rows":[[{"type":"component","dimension":{"md":12,"sm":12,"xs":12,"lg":12},"propertyValues":{"labelHidden":{"type":"constant","value":false},"readonly":{"type":"constant","value":false},"level":{"type":"constant","value":"Level 4"},"cssClasses":{"type":"constant","value":"greyBandeau"},"widgetId":{"type":"constant","value":"pbTitle"},"isDisplayed":{"type":"constant","value":true},"label":{"type":"constant"},"text":{"type":"interpolation","value":"Détail de la demande"},"alignment":{"type":"constant","value":"left"},"class":{"type":"constant","value":"org.bonitasoft.web.designer.experimental.parametrizedWidget.TitleWidget"},"dimension":{"type":"constant","value":12},"hidden":{"type":"constant","value":false}},"reference":"b88bc2b0-f67c-41ff-87c8-15d6a90cbcd7","id":"pbTitle"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":""},"level":{"type":"constant","value":"Level 2"},"alignment":{"type":"constant","value":"left"}},"reference":"c231c6e6-b92a-49eb-a3fd-ffb25403d610","id":"pbTitle"}],[{"type":"tabsContainer","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":"tabContainerBorder"},"hidden":{"type":"constant","value":false}},"reference":"fa536f5f-d344-46b5-a2b0-11b9f7da978a","tabs":[{"container":{"type":"container","dimension":{"xs":12},"propertyValues":{},"reference":"fd5af477-66ef-4f65-a21b-dfb5533860bb","rows":[[{"type":"component","dimension":{"md":12,"sm":12,"xs":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"widgetId":{"type":"constant","value":"pbInput"},"isDisplayed":{"type":"constant","value":true},"labelWidth":{"type":"constant","value":1},"label":{"type":"constant","value":"Libellé de la demande"},"type":{"type":"constant","value":"text"},"required":{"type":"constant","value":true},"labelHidden":{"type":"constant","value":false},"readonly":{"type":"constant","value":false},"labelPosition":{"type":"constant","value":"top"},"placeholder":{"type":"constant"},"alignment":{"type":"constant","value":"left"},"class":{"type":"constant","value":"org.bonitasoft.web.designer.experimental.parametrizedWidget.InputWidget"},"dimension":{"type":"constant","value":12},"value":{"type":"variable","value":"demande.libelleDemande"},"hidden":{"type":"constant","value":false},"minLength":{"type":"constant","value":""},"maxLength":{"type":"constant","value":""},"readOnly":{"type":"expression","value":"readOnly"},"min":{"type":"constant"},"max":{"type":"constant"},"step":{"type":"constant","value":1}},"reference":"ffe27df0-ffcf-4fe0-83aa-babaed5c8700","id":"pbInput"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":6,"lg":6},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"expression","value":"context == undefined"},"required":{"type":"constant","value":false},"minLength":{"type":"constant","value":""},"maxLength":{"type":"constant","value":""},"readOnly":{"type":"constant","value":true},"labelHidden":{"type":"constant","value":false},"label":{"type":"interpolation","value":"Date de la demande"},"labelPosition":{"type":"constant","value":"top"},"labelWidth":{"type":"constant","value":4},"placeholder":{"type":"interpolation"},"value":{"type":"variable","value":"demande.dateDemande | date:'MM/dd/yyyy':'UTC'"},"type":{"type":"constant","value":"text"},"min":{"type":"constant"},"max":{"type":"constant"},"step":{"type":"constant","value":1}},"reference":"7c8148d4-a0ed-479d-8cca-f210246afbb5","id":"pbInput"},{"type":"component","dimension":{"xs":12,"sm":12,"md":6,"lg":6},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"expression","value":"context == undefined"},"required":{"type":"constant","value":false},"minLength":{"type":"constant","value":""},"maxLength":{"type":"constant","value":""},"readOnly":{"type":"constant","value":true},"labelHidden":{"type":"constant","value":false},"label":{"type":"interpolation","value":"Numéro de la demande"},"labelPosition":{"type":"constant","value":"top"},"labelWidth":{"type":"constant","value":4},"placeholder":{"type":"interpolation"},"value":{"type":"variable","value":"demande.caseId"},"type":{"type":"constant","value":"text"},"min":{"type":"constant"},"max":{"type":"constant"},"step":{"type":"constant","value":1}},"reference":"49ce6ad9-061a-46cf-97e3-ff3c6b385f7c","id":"pbInput"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":6,"lg":6},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"disabled":{"type":"expression","value":"readOnly"},"required":{"type":"constant","value":true},"labelHidden":{"type":"constant","value":false},"label":{"type":"interpolation","value":"Famille de la demande"},"labelPosition":{"type":"constant","value":"top"},"labelWidth":{"type":"constant","value":4},"placeholder":{"type":"interpolation","value":"Select an option"},"availableValues":{"type":"expression","value":"famillesDemande"},"displayedKey":{"type":"constant"},"returnedKey":{"type":"constant"},"value":{"type":"variable","value":"demande.familleDemande"}},"reference":"57112c40-4762-45ef-90c0-e979949c009b","id":"pbSelect"},{"type":"component","dimension":{"xs":12,"sm":12,"md":6,"lg":6},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"expression","value":"sousFamilleCachee"},"disabled":{"type":"expression","value":"readOnly"},"required":{"type":"constant","value":true},"labelHidden":{"type":"constant","value":false},"label":{"type":"interpolation","value":"Sous famille"},"labelPosition":{"type":"constant","value":"top"},"labelWidth":{"type":"constant","value":4},"placeholder":{"type":"interpolation","value":"Select an option"},"availableValues":{"type":"expression","value":"quelSousFamille"},"displayedKey":{"type":"constant"},"returnedKey":{"type":"constant"},"value":{"type":"variable","value":"demande.sousFamilleDemande"}},"reference":"5ebf8057-cfec-422a-b872-462fe35fd2f5","id":"pbSelect"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":"bg-primary"},"hidden":{"type":"constant","value":true},"text":{"type":"interpolation","value":"{{displayTitle}}"},"level":{"type":"constant","value":"Level 4"},"alignment":{"type":"constant","value":"center"}},"reference":"f69c90b1-e0c4-4be3-b725-cf7551eaf52a","id":"pbTitle"}],[{"type":"fragment","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"expression","value":"demande.sousFamilleDemande != 'Lavage'"}},"reference":"a87a425d-b152-4fb2-bafa-aa2587e797ec","id":"afea4243-5331-4f68-add0-cacafe445b8d","binding":{"lavage":"demande.detailDemande","readOnly":"readOnly"}}],[{"type":"fragment","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"expression","value":"demande.sousFamilleDemande != 'Révision/Entretien/Réparation'"}},"reference":"1791dff2-6e7b-45e3-b105-688f3e2204e2","id":"43b81f75-0b4d-4016-a54b-51062e6b4feb","binding":{"readOnly":"readOnly","detailBO":"demande.detailDemande","carteGriseDoc":"context.carteGrise_ref","input":"formInput"}}],[{"type":"fragment","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"expression","value":"demande.sousFamilleDemande != 'Pneus'"}},"reference":"37ecae18-2c90-4f46-8351-9b5e1297f5c2","id":"c59120af-60a4-4207-99b0-a9a2c9bd4668","binding":{"readOnly":"readOnly","detailBO":"demande.detailDemande"}}],[{"type":"fragment","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"expression","value":"demande.sousFamilleDemande != 'Contrôle technique'"}},"reference":"ccf56f5b-e75f-47ce-be81-596fecc5c433","id":"f0388863-2364-406a-a708-c3a62538a49b","binding":{"readOnly":"readOnly","detailBO":"demande.detailDemande"}}],[{"type":"fragment","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"expression","value":"demande.familleDemande != \"Recherche d'artisan\""}},"reference":"5ccde92b-557d-499a-b5cb-c8ca851b0f80","id":"04777f2c-7a99-4b51-ad63-264affcc77d5","binding":{"readOnly":"readOnly","detailBO":"demande.detailDemande"}}],[{"type":"fragment","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"expression","value":"demande.familleDemande != \"Services à domicile\""}},"reference":"c5f15b77-27c6-4775-85ca-31996d44c032","id":"f481f2ac-101c-4197-b1f4-8341769d5b0c","binding":{"readOnly":"readOnly","detailBO":"demande.detailDemande"}}],[{"type":"fragment","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"expression","value":"demande.familleDemande != \"Courses\""}},"reference":"83733766-df03-4116-9bd9-a7859584fe30","id":"38bde3f7-746a-4e05-94d1-6b0642519942","binding":{"readOnly":"readOnly","detailBO":"demande.detailDemande"}}],[{"type":"fragment","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"expression","value":"demande.familleDemande != \"Démarches administratives\""}},"reference":"bd77719c-ca31-42f1-aa54-080e67678643","id":"ddb8fd53-90b7-4d80-9dc8-3abd31b05845","binding":{"readOnly":"readOnly","detailBO":"demande.detailDemande"}}],[{"type":"fragment","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"expression","value":"demande.familleDemande != \"Services rendus\""}},"reference":"de8640d3-c70b-4182-a420-b1af0347730e","id":"d3ff1daa-f1b4-4acb-b5f5-5d770d31e91d","binding":{"readOnly":"readOnly","detailBO":"demande.detailDemande"}}]]},"title":"Demande"},{"container":{"type":"container","dimension":{"xs":12},"propertyValues":{},"reference":"5d8671ed-1468-4d0a-8ae3-ba83d5b4a36f","rows":[[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":""},"level":{"type":"constant","value":"Level 2"},"alignment":{"type":"constant","value":"left"}},"reference":"c892c514-f1ee-400d-a68b-bc1131e7007b","id":"pbTitle"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":"bg-primary"},"hidden":{"type":"constant","value":true},"text":{"type":"interpolation","value":"Pièces jointes"},"level":{"type":"constant","value":"Level 4"},"alignment":{"type":"constant","value":"left"}},"reference":"d341d714-ce16-414a-ad0a-a926943f6af2","id":"pbTitle"}],[{"type":"container","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"repeatedCollection":{"type":"variable","value":"context.piecesJointes_ref"}},"reference":"2a59ad08-1d64-4450-8ab7-69337e14f527","rows":[[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"expression","value":"$item.url == '' || $item.url == undefined"},"text":{"type":"interpolation","value":"{{$item.fileName}}"},"targetUrl":{"type":"expression","value":"\"/bonita/portal/\"+ $item.url"},"target":{"type":"constant","value":"_self"},"alignment":{"type":"constant","value":"left"},"buttonStyle":{"type":"constant","value":"link"}},"reference":"dd1dddf6-110e-4bfa-8853-b4e66cf930e3","id":"pbLink"}]]}],[{"type":"container","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"repeatedCollection":{"type":"variable","value":"formInput.piecesJointesDocumentInput"}},"reference":"291dfcc2-ea16-40ba-a983-99a0c4ab8e29","rows":[[{"type":"component","dimension":{"xs":12,"sm":12,"md":6,"lg":6},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"expression","value":"$item.url"},"required":{"type":"constant","value":false},"labelHidden":{"type":"constant","value":true},"label":{"type":"interpolation","value":"Default label"},"labelPosition":{"type":"constant","value":"left"},"labelWidth":{"type":"constant","value":4},"placeholder":{"type":"interpolation"},"url":{"type":"constant","value":"../API/formFileUpload"},"value":{"type":"variable","value":"$item"},"errorContent":{"type":"variable"}},"reference":"2dc93f73-d1ac-4bd5-8d69-b3ff4090eba9","id":"pbUpload"},{"type":"component","dimension":{"xs":12,"sm":12,"md":6,"lg":6},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"disabled":{"type":"constant","value":false},"label":{"type":"interpolation","value":"X"},"alignment":{"type":"constant","value":"left"},"buttonStyle":{"type":"constant","value":"primary"},"action":{"type":"constant","value":"Remove from collection"},"url":{"type":"interpolation"},"dataToSend":{"type":"constant"},"dataFromSuccess":{"type":"variable"},"dataFromError":{"type":"variable"},"targetUrlOnSuccess":{"type":"interpolation"},"collectionToModify":{"type":"variable","value":"formInput.piecesJointesDocumentInput"},"collectionPosition":{"type":"constant","value":"Item"},"valueToAdd":{"type":"constant"},"removeItem":{"type":"variable","value":"$item"}},"reference":"e0f195a8-8690-4b7a-871d-850067a3b7c6","id":"pbButton"}]]}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"expression","value":"readOnly"},"disabled":{"type":"constant","value":false},"label":{"type":"interpolation","value":"Ajouter une pièce jointe"},"alignment":{"type":"constant","value":"left"},"buttonStyle":{"type":"constant","value":"primary"},"action":{"type":"constant","value":"Add to collection"},"url":{"type":"interpolation"},"dataToSend":{"type":"constant"},"dataFromSuccess":{"type":"variable"},"dataFromError":{"type":"variable"},"targetUrlOnSuccess":{"type":"interpolation"},"collectionToModify":{"type":"variable","value":"formInput.piecesJointesDocumentInput"},"collectionPosition":{"type":"constant","value":"Last"},"valueToAdd":{"type":"constant"},"removeItem":{"type":"variable"}},"reference":"6ea0c8e1-5ff8-4f99-9853-0b8ea168ad3e","id":"pbButton"}]]},"title":"Pièces jointes"},{"container":{"type":"container","dimension":{"xs":12},"propertyValues":{},"reference":"33cbb82b-4199-4bec-88cd-1ed9fdda4e27","rows":[[{"type":"fragment","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false}},"reference":"96c3e62b-20d0-4c88-b335-6e8fb8e6e0d7","id":"805bf02d-c567-492a-b1b6-0b77daab7260","binding":{"echangesBO":"demande.echanges","comment":"comment","readOnly":"readOnly"}}]]},"title":"Echanges"}]}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":""},"level":{"type":"constant","value":"Level 2"},"alignment":{"type":"constant","value":"left"}},"reference":"22d612b1-625f-437a-aee9-541a290c28e6","id":"pbTitle"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":true},"text":{"type":"interpolation","value":"{{demande | json}}"},"alignment":{"type":"constant","value":"left"}},"reference":"abb73655-2152-40b7-9b00-25fa38bbb00c","id":"pbText"}]],"assets":[],"inactiveAssets":[],"data":{"demande":{"type":"constant","exposed":true},"readOnly":{"type":"constant","exposed":true},"famillesDemande":{"type":"json","value":"[\"Automobile\", \"Recherche d'artisan\", \"Services à domicile\", \"Démarches administratives\", \"Courses\", \"Services rendus\", \"Autres\"]","exposed":false},"sousFamilleAutomobile":{"type":"json","value":"[\"Lavage\", \"Révision/Entretien/Réparation\", \"Pneus\", \"Contrôle technique\",\"Autres\"]","exposed":false},"sousFamilleDemarchesAdmin":{"type":"json","value":"[\"Services postaux\", \"Autres\"]","exposed":false},"quelSousFamille":{"type":"expression","value":"if ($data.demande){\n    if ($data.demande.detailDemande && !($data.demande.detailDemande instanceof Object)){\n        $data.demande.detailDemande = JSON.parse($data.demande.detailDemande);\n    }\n    if ($data.demande.familleDemande == \"Automobile\"){\n        $data.sousFamilleCachee = false;\n        return $data.sousFamilleAutomobile;\n    } else {\n        if ($data.demande.familleDemande == \"Démarches administratives\"){\n            $data.sousFamilleCachee = false;\n            return $data.sousFamilleDemarchesAdmin;\n        }\n    }\n    $data.demande.sousFamilleDemande = \"\";\n    $data.sousFamilleCachee = true;\n}\nreturn \"\";","exposed":false},"sousFamilleCachee":{"type":"constant","value":"true","exposed":false},"displayTitle":{"type":"expression","value":"var text = \"\";\nif ($data.demande.familleDemande){\n    text += $data.demande.familleDemande;\n    if ($data.demande.sousFamilleDemande){\n        text += \" - \";\n        text += $data.demande.sousFamilleDemande;\n    }\n}\nreturn text;","exposed":false},"comment":{"type":"constant","exposed":true},"context":{"type":"constant","exposed":true},"formInput":{"type":"constant","exposed":true}}}