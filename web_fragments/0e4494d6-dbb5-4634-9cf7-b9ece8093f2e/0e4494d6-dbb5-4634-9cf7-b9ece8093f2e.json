{"designerVersion":"1.3.25","favorite":false,"id":"0e4494d6-dbb5-4634-9cf7-b9ece8093f2e","name":"demandeurFragment","type":"fragment","lastUpdate":1519121180064,"rows":[[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":"greyBandeau"},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":"Informations du demandeur"},"level":{"type":"constant","value":"Level 4"},"alignment":{"type":"constant","value":"left"}},"reference":"1f2bdada-3073-4ebc-8cce-53903e7a5d8f","id":"pbTitle"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"expression","value":"!isConnectedUserAConcierge || (demande.caseId != null && demande.caseId != undefined)"},"disabled":{"type":"constant","value":false},"required":{"type":"constant","value":false},"label":{"type":"interpolation","value":"Faire une demande pour le compte d'un utilisateur"},"value":{"type":"variable","value":"demandePourAutreUtilisateur"}},"reference":"57ae4755-2cae-4d41-9b95-587a18141fa5","id":"pbCheckbox"}],[{"type":"container","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"expression","value":"!demandePourAutreUtilisateur"},"repeatedCollection":{"type":"variable"}},"reference":"848f8995-b220-45b1-8f97-f9cddf905551","rows":[[{"type":"component","dimension":{"xs":12,"sm":12,"md":9,"lg":6},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"required":{"type":"constant","value":false},"minLength":{"type":"constant","value":""},"maxLength":{"type":"constant","value":""},"readOnly":{"type":"constant","value":false},"labelHidden":{"type":"constant","value":false},"label":{"type":"interpolation","value":"Nom/prénom de l'utilisateur"},"labelPosition":{"type":"constant","value":"left"},"labelWidth":{"type":"constant","value":4},"placeholder":{"type":"interpolation"},"value":{"type":"variable","value":"filter"},"type":{"type":"constant","value":"text"},"min":{"type":"constant"},"max":{"type":"constant"},"step":{"type":"constant","value":1}},"reference":"73de8a4f-ee9d-41e7-afbc-78d3e824cbbf","id":"pbInput"},{"type":"component","dimension":{"xs":12,"sm":12,"md":3,"lg":6},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"disabled":{"type":"constant","value":false},"label":{"type":"interpolation","value":"<i class=\"glyphicon glyphicon-search\"></i> Chercher un utilisateur"},"alignment":{"type":"constant","value":"left"},"buttonStyle":{"type":"constant","value":"primary"},"action":{"type":"constant","value":"GET"},"url":{"type":"interpolation","value":"/bonita/API/identity/user?p=0&c=10&s={{filter}}&d=professional_data"},"dataToSend":{"type":"constant"},"dataFromSuccess":{"type":"variable","value":"results"},"dataFromError":{"type":"variable"},"targetUrlOnSuccess":{"type":"interpolation"},"collectionToModify":{"type":"variable"},"collectionPosition":{"type":"constant","value":"Last"},"valueToAdd":{"type":"constant"},"removeItem":{"type":"variable"}},"reference":"0575a959-a2f3-4f60-99b0-a5bede33d471","id":"pbButton"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"expression","value":"results == undefined || results.length == 0"},"headers":{"type":"constant","value":["Nom","Prénom","Email"]},"type":{"type":"constant","value":"Variable"},"apiUrl":{"type":"constant","value":"../API/"},"params":{"type":"constant"},"content":{"type":"expression","value":"results"},"columnsKey":{"type":"constant","value":["lastname","firstname","professional_data.email"]},"sortColumns":{"type":"constant"},"selectedRow":{"type":"variable","value":"selectedUser"},"pageSize":{"type":"constant","value":10},"filter":{"type":"constant"}},"reference":"2da9e514-28cb-44bc-bbd1-958dfce7b8ac","id":"pbDataTable"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"expression","value":"results == undefined || results.length > 0"},"text":{"type":"interpolation","value":"Aucun utilisateur n'a été trouvé avec les informations fournies."},"alignment":{"type":"constant","value":"left"}},"reference":"5bf5d602-fab4-45d1-aea1-f7b7775135fe","id":"pbText"}]]}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":true},"text":{"type":"interpolation","value":"<pre>{{isConnectedUserAConcierge | json}}"},"alignment":{"type":"constant","value":"left"}},"reference":"276dd7d0-457c-435e-aeca-3e7c4e2e9e09","id":"pbText"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":6,"lg":6},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"required":{"type":"constant","value":false},"minLength":{"type":"constant","value":""},"maxLength":{"type":"constant","value":""},"readOnly":{"type":"constant","value":true},"labelHidden":{"type":"constant","value":false},"label":{"type":"interpolation","value":"<i class=\"glyphicon glyphicon-user\"></i> Prénom"},"labelPosition":{"type":"constant","value":"top"},"labelWidth":{"type":"constant","value":4},"placeholder":{"type":"interpolation"},"value":{"type":"variable","value":"requester.firstname"},"type":{"type":"constant","value":"text"},"min":{"type":"constant"},"max":{"type":"constant"},"step":{"type":"constant","value":1}},"reference":"86646db7-e0ef-4006-aec8-c17a2b1c5057","id":"pbInput"},{"type":"component","dimension":{"xs":12,"sm":12,"md":6,"lg":6},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"required":{"type":"constant","value":false},"minLength":{"type":"constant","value":""},"maxLength":{"type":"constant","value":""},"readOnly":{"type":"constant","value":true},"labelHidden":{"type":"constant","value":false},"label":{"type":"interpolation","value":"<i class=\"glyphicon glyphicon-user\"></i> Nom"},"labelPosition":{"type":"constant","value":"top"},"labelWidth":{"type":"constant","value":4},"placeholder":{"type":"interpolation"},"value":{"type":"variable","value":"requester.lastname"},"type":{"type":"constant","value":"text"},"min":{"type":"constant"},"max":{"type":"constant"},"step":{"type":"constant","value":1}},"reference":"8e2e5f20-2f74-4370-8504-1a1fd73a3446","id":"pbInput"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":6,"lg":6},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"required":{"type":"constant","value":false},"minLength":{"type":"constant","value":""},"maxLength":{"type":"constant","value":""},"readOnly":{"type":"constant","value":true},"labelHidden":{"type":"constant","value":false},"label":{"type":"interpolation","value":"<i class=\"glyphicon glyphicon-envelope\"></i> Adresse email"},"labelPosition":{"type":"constant","value":"top"},"labelWidth":{"type":"constant","value":4},"placeholder":{"type":"interpolation"},"value":{"type":"variable","value":"requester.professional_data.email"},"type":{"type":"constant","value":"text"},"min":{"type":"constant"},"max":{"type":"constant"},"step":{"type":"constant","value":1}},"reference":"328d44ab-97ad-4a29-a87b-21fa7194d6e6","id":"pbInput"},{"type":"component","dimension":{"xs":12,"sm":12,"md":6,"lg":6},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"required":{"type":"constant","value":false},"minLength":{"type":"constant","value":""},"maxLength":{"type":"constant","value":""},"readOnly":{"type":"expression","value":"readOnly"},"labelHidden":{"type":"constant","value":false},"label":{"type":"interpolation","value":"<i class=\"glyphicon glyphicon-phone-alt\"></i> Numéro de téléphone"},"labelPosition":{"type":"constant","value":"top"},"labelWidth":{"type":"constant","value":4},"placeholder":{"type":"interpolation"},"value":{"type":"variable","value":"demande.numTelephone"},"type":{"type":"constant","value":"text"},"min":{"type":"constant"},"max":{"type":"constant"},"step":{"type":"constant","value":1}},"reference":"bfc94005-64fc-4777-81e6-6ca5d7e6ad8d","id":"pbInput"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":""},"level":{"type":"constant","value":"Level 2"},"alignment":{"type":"constant","value":"left"}},"reference":"8a0ada5d-853f-45ef-8810-d7bec48b808d","id":"pbTitle"}]],"assets":[],"inactiveAssets":[],"data":{"connectedUser":{"type":"url","value":"../API/identity/user/{{session.user_id}}?d=professional_data","exposed":false},"readOnly":{"type":"constant","exposed":true},"idDemandeur":{"type":"constant","exposed":true},"demande":{"type":"constant","exposed":true},"filter":{"type":"constant","exposed":false},"results":{"type":"constant","exposed":false},"selectedUser":{"type":"constant","exposed":false},"requester":{"type":"expression","value":"if ($data.demandePourAutreUtilisateur && $data.selectedUser){\n    $data.demande.idDemandeur = $data.selectedUser.id;\n    return $data.selectedUser;\n} else {\n    if ($data.readOnly){\n        return $data.demandeur;\n    } else {\n        $data.demande.idDemandeur = $data.connectedUser.id;\n        return $data.connectedUser;\n    }\n}","exposed":false},"demandePourAutreUtilisateur":{"type":"constant","exposed":false},"session":{"type":"url","value":"../API/system/session/1","exposed":false},"isConnectedUserAConcierge":{"type":"expression","value":"/*if ($data.profilesOfConnectedUser && $data.profilesOfConnectedUser.length > 0){\n    for (var profileIndex in $data.profilesOfConnectedUser) {\n        var profile = $data.profilesOfConnectedUser[profileIndex];\n        if (profile.name == 'Concierge'){\n            return true\n        }\n    }\n}*/\nif ($data.rolesOfConnectedUser && $data.rolesOfConnectedUser.length > 0){\n    for (var membershipIndex in $data.rolesOfConnectedUser) {\n        var membership = $data.rolesOfConnectedUser[membershipIndex];\n        if (membership.role_id.name == 'Concierge'){\n            return true;\n        }\n    }\n}\nreturn false;","exposed":false},"rolesOfConnectedUser":{"type":"url","value":"../API/identity/membership?p=0&c=10&f=user_id={{session.user_id}}&d=role_id","exposed":false},"demandeur":{"type":"url","value":"../API/identity/user/{{demande.idDemandeur}}?d=professional_data","exposed":false}}}