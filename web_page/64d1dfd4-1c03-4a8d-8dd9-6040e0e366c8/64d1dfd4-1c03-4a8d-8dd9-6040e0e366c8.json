{"designerVersion":"1.3.25","favorite":false,"id":"64d1dfd4-1c03-4a8d-8dd9-6040e0e366c8","name":"conciergerieDemandesEnCoursConcierge","type":"page","lastUpdate":1518567018163,"rows":[[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":"greyBandeau"},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":"DEMANDES EN COURS"},"level":{"type":"constant","value":"Level 4"},"alignment":{"type":"constant","value":"center"}},"reference":"3f648aaa-0978-4106-9ed6-8c51f8c3f80f","id":"pbTitle"}],[{"type":"container","dimension":{"xs":12,"sm":12,"md":7,"lg":6},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"repeatedCollection":{"type":"variable"}},"reference":"80ea2c56-e428-4e4c-8d2f-57be360311e5","rows":[[]]},{"type":"component","dimension":{"xs":12,"sm":12,"md":5,"lg":6},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"required":{"type":"constant","value":false},"minLength":{"type":"constant","value":""},"maxLength":{"type":"constant","value":""},"readOnly":{"type":"constant","value":false},"labelHidden":{"type":"constant","value":false},"label":{"type":"interpolation","value":"Rechercher :"},"labelPosition":{"type":"constant","value":"left"},"labelWidth":{"type":"constant","value":4},"placeholder":{"type":"interpolation"},"value":{"type":"variable","value":"filtre"},"type":{"type":"constant","value":"text"},"min":{"type":"constant"},"max":{"type":"constant"},"step":{"type":"constant","value":1}},"reference":"db80b157-8695-4b10-882f-4231dac5b857","id":"pbInput"}],[{"type":"container","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"repeatedCollection":{"type":"variable"}},"reference":"d043a3eb-6545-40f8-9718-856ad1760d4d","rows":[[{"type":"component","dimension":{"xs":12,"sm":12,"md":4,"lg":4},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"readOnly":{"type":"constant","value":false},"required":{"type":"constant","value":false},"labelHidden":{"type":"constant","value":false},"label":{"type":"interpolation","value":"Demandeur"},"labelPosition":{"type":"constant","value":"top"},"labelWidth":{"type":"constant","value":4},"placeholder":{"type":"interpolation"},"availableValues":{"type":"expression","value":"users"},"displayedKey":{"type":"constant","value":"fullName"},"returnKey":{"type":"constant","value":"userId"},"value":{"type":"variable","value":"filtres.demandeur"}},"reference":"e1a718f4-ca22-4c0b-b787-91ec9f93d803","id":"customAutocompleteKey"},{"type":"component","dimension":{"xs":12,"sm":12,"md":4,"lg":4},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"disabled":{"type":"constant","value":false},"required":{"type":"constant","value":false},"labelHidden":{"type":"constant","value":false},"label":{"type":"interpolation","value":"Statut de la demande"},"labelPosition":{"type":"constant","value":"top"},"labelWidth":{"type":"constant","value":4},"placeholder":{"type":"interpolation","value":"Select an option"},"availableValues":{"type":"expression","value":"listeStatut"},"displayedKey":{"type":"constant"},"returnedKey":{"type":"constant"},"value":{"type":"variable","value":"filtres.statut"}},"reference":"a47d30a4-7d1e-4a39-9365-59322b620f76","id":"pbSelect"},{"type":"component","dimension":{"xs":12,"sm":12,"md":4,"lg":4},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"disabled":{"type":"constant","value":false},"required":{"type":"constant","value":false},"labelHidden":{"type":"constant","value":false},"label":{"type":"interpolation","value":"Famille de la demande"},"labelPosition":{"type":"constant","value":"top"},"labelWidth":{"type":"constant","value":4},"placeholder":{"type":"interpolation","value":"Select an option"},"availableValues":{"type":"expression","value":"famillesDemande"},"displayedKey":{"type":"constant"},"returnedKey":{"type":"constant"},"value":{"type":"variable","value":"filtres.famille"}},"reference":"1303fc2b-eeb9-4597-9c02-ab982785e19c","id":"pbSelect"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":6,"lg":6},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"readOnly":{"type":"constant","value":false},"required":{"type":"constant","value":false},"labelHidden":{"type":"constant","value":false},"label":{"type":"interpolation","value":"Date début"},"labelPosition":{"type":"constant","value":"top"},"labelWidth":{"type":"constant","value":4},"placeholder":{"type":"interpolation","value":"Enter a date (dd/mm/yyyy)"},"value":{"type":"variable","value":"filtres.dateDebut"},"dateFormat":{"type":"constant","value":"dd/MM/yyyy"},"showToday":{"type":"constant","value":true}},"reference":"0aef46c0-64f0-4532-9a7d-665b4859bb0f","id":"pbDatePicker"},{"type":"component","dimension":{"xs":12,"sm":12,"md":6,"lg":6},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"readOnly":{"type":"constant","value":false},"required":{"type":"constant","value":false},"labelHidden":{"type":"constant","value":false},"label":{"type":"interpolation","value":"Date fin"},"labelPosition":{"type":"constant","value":"top"},"labelWidth":{"type":"constant","value":4},"placeholder":{"type":"interpolation","value":"Enter a date (dd/mm/yyyy)"},"value":{"type":"variable","value":"filtres.dateFin"},"dateFormat":{"type":"constant","value":"dd/MM/yyyy"},"showToday":{"type":"constant","value":true}},"reference":"f8f9ef63-4c74-42a3-afbc-51f3b5eb81b9","id":"pbDatePicker"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"disabled":{"type":"constant","value":false},"label":{"type":"interpolation","value":"Rechercher les demandes"},"alignment":{"type":"constant","value":"right"},"buttonStyle":{"type":"constant","value":"primary"},"action":{"type":"constant","value":"POST"},"url":{"type":"interpolation","value":"../API/extension/rechercheDemandeService"},"dataToSend":{"type":"expression","value":"filtres"},"dataFromSuccess":{"type":"variable","value":"demandes"},"dataFromError":{"type":"variable","value":"searchError"},"targetUrlOnSuccess":{"type":"interpolation"},"collectionToModify":{"type":"variable"},"collectionPosition":{"type":"constant","value":"Last"},"valueToAdd":{"type":"constant"},"removeItem":{"type":"variable"}},"reference":"d8d915c0-27a1-480f-9126-d01020d0ae28","id":"pbButton"}]]}],[{"type":"container","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"expression","value":"demandes == undefined || demandes.length == 0"},"repeatedCollection":{"type":"variable"}},"reference":"5d1591dc-4106-4733-aa04-61fda9fe1c84","rows":[[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"headers":{"type":"constant","value":["Numéro de la demande","Crée le","Libéllé","Statut"]},"type":{"type":"constant","value":"Variable"},"apiUrl":{"type":"constant","value":"../API/"},"params":{"type":"constant"},"content":{"type":"expression","value":"demandes"},"columnsKey":{"type":"constant","value":["caseId","dateDemande | date:'dd/MM/yyyy':'UTC'","libelleDemande","statutDemande"]},"sortColumns":{"type":"constant","value":[]},"selectedRow":{"type":"variable","value":"demandeSelectionnee"},"pageSize":{"type":"constant","value":5},"filter":{"type":"expression","value":"filtre"}},"reference":"b68f3884-8d3c-43fc-82a8-ead241ce7bc2","id":"pbDataTable"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"disabled":{"type":"constant","value":false},"label":{"type":"interpolation","value":"Exporter"},"alignment":{"type":"constant","value":"right"},"buttonStyle":{"type":"constant","value":"primary"},"filename":{"type":"constant","value":"export.xslx"},"exportedData":{"type":"expression","value":"prepareDataToExport"},"header":{"type":"constant"}},"reference":"c30ab7aa-4a9c-450c-aec6-0698b2d457cf","id":"customExportExcel"}]]}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"expression","value":"demandes.length > 0"},"text":{"type":"interpolation","value":"Nous n'avons trouvé aucune demande."},"alignment":{"type":"constant","value":"center"}},"reference":"823d358d-4d54-4662-bcb0-220bf2f34128","id":"pbText"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"expression","value":"!searchError"},"text":{"type":"interpolation","value":"Une erreur s'est produite : <pre>{{searchError | json}}"},"alignment":{"type":"constant","value":"left"}},"reference":"a558a09e-67f0-4548-89e0-e4b7ea0b4ab5","id":"pbText"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":4,"lg":4},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"expression","value":"demandeSelectionnee == '' || demandeSelectionnee == undefined"},"text":{"type":"interpolation","value":"Détail de la demande"},"targetUrl":{"type":"expression","value":"\"/bonita/portal/form/processInstance/\" + demandeSelectionnee.caseId"},"target":{"type":"constant","value":"_self"},"alignment":{"type":"constant","value":"right"},"buttonStyle":{"type":"constant","value":"primary"}},"reference":"c31a6d3b-d5d1-44a8-9d06-1978bc4d444e","id":"pbLink"},{"type":"component","dimension":{"xs":12,"sm":12,"md":3,"lg":4},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"expression","value":"demandeSelectionnee == '' || demandeSelectionnee == undefined"},"disabled":{"type":"constant","value":false},"label":{"type":"interpolation","value":"Imprimer la demande"},"alignment":{"type":"constant","value":"center"},"buttonStyle":{"type":"constant","value":"primary"},"action":{"type":"constant","value":"GET"},"url":{"type":"interpolation","value":"../API/extension/impression?userId={{session.user_id}}&caseId={{demandeSelectionnee.caseId}}"},"dataToSend":{"type":"constant"},"dataFromSuccess":{"type":"variable","value":""},"dataFromError":{"type":"variable","value":"searchError"},"targetUrlOnSuccess":{"type":"interpolation"},"collectionToModify":{"type":"variable"},"collectionPosition":{"type":"constant","value":"Last"},"valueToAdd":{"type":"constant"},"removeItem":{"type":"variable"},"print":{"type":"constant","value":true}},"reference":"af3269e8-0d98-4e84-86b5-1da695875418","id":"customButtonWithPrint"},{"type":"container","dimension":{"xs":12,"sm":12,"md":4,"lg":4},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"repeatedCollection":{"type":"variable","value":"tachesParCase"}},"reference":"da4a867f-58b1-4980-a397-e9559762b3d4","rows":[[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"expression","value":"$item.assigned_id != session.user_id"},"text":{"type":"interpolation","value":"{{$item.name}}"},"targetUrl":{"type":"expression","value":"\"/bonita/portal/form/taskInstance/\" + $item.id"},"target":{"type":"constant","value":"_self"},"alignment":{"type":"constant","value":"left"},"buttonStyle":{"type":"constant","value":"primary"}},"reference":"6de61103-e5fe-45f6-9d1a-1f23b98f9281","id":"pbLink"}]]}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":"<pre>{{filtres | json}}"},"alignment":{"type":"constant","value":"left"}},"reference":"a8656bee-5b50-4c60-a393-b5a94bbbe99d","id":"pbText"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":true},"text":{"type":"interpolation","value":"<pre>{{session | json}}"},"alignment":{"type":"constant","value":"left"}},"reference":"c1f11e77-e2dd-456f-9098-0d99a8262798","id":"pbText"}]],"assets":[{"id":"11199431-68bb-4b62-a524-d2fa25819267","name":"localization.json","type":"json","order":0,"external":false},{"id":"ee0a5edc-c910-43d2-a396-b9be364745ba","name":"/bonita/portal/resource/app/conciergerie/cdn/content/assets/css/conciergerie.css","type":"css","order":1,"external":true}],"inactiveAssets":[],"data":{"session":{"type":"url","value":"../API/system/session/1","exposed":false},"demandeSelectionnee":{"type":"constant","exposed":false},"tachesParCase":{"type":"url","value":"../API/bpm/humanTask?p=0&c=10&f=caseId={{demandeSelectionnee.caseId}}","exposed":false},"filtre":{"type":"constant","exposed":false},"famillesDemande":{"type":"json","value":"[\"Automobile\", \"Recherche d'artisan\", \"Services à domicile\", \"Démarches administratives\", \"Courses\", \"Services rendus\", \"Autres\"]","exposed":false},"prepareDataToExport":{"type":"expression","value":"var exportedData = angular.copy($data.demandes);\nangular.forEach(exportedData, function(demande){\n\t\t\tdelete demande.persistenceId_string;\n\t\t\tdelete demande.persistenceVersion;\n\t\t\tdelete demande.persistenceVersion_string;\n\t\t\tdelete demande.idDemandeur;\n\t\t\tdelete demande.echanges;\n\t\t\tdelete demande.detailDemande;\n\t\t\tdelete demande.caseId_string;\n\t\t});\nreturn exportedData;","exposed":false},"filtres":{"type":"json","value":"{\n    \"demandeur\" : -1,\n    \"famille\" : \"\",\n    \"statut\" : \"\",\n    \"dateDebut\" : \"\",\n    \"dateFin\" : \"\"\n}","exposed":false},"listeStatut":{"type":"json","value":"[\"Demande en cours de traitement\",\n\"En attente d’information de l’utilisateur\",\n\"Demande annulée par l’utilisateur\",\n\"En attente du devis\",\n\"Validation du devis par l’utilisateur\",\n\"Prise de rendez-vous en cours\",\n\"Rendez-vous confirmé\",\n\"Votre article vous attend à la conciergerie\",\n\"Votre preuve de dépôt vous attend à la conciergerie\",\n\"En attente de paiement\",\n\"Demande traitée, en attente de résultat\",\n\"Prestation terminée\",\n\"Prestation refusée\"]","exposed":false},"users":{"type":"url","value":"../API/extension/usersAndIds?p=0&c=100","exposed":false},"searchError":{"type":"constant","exposed":false},"demandes":{"type":"constant","exposed":false}}}