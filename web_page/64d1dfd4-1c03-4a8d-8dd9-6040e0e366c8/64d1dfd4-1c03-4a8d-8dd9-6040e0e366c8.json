{"designerVersion":"1.3.25","favorite":false,"id":"64d1dfd4-1c03-4a8d-8dd9-6040e0e366c8","name":"conciergerieRechercherDemandesConcierge","type":"page","lastUpdate":1520469819664,"rows":[[{"type":"container","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"repeatedCollection":{"type":"variable","value":""}},"reference":"2065f223-a1b5-473c-974a-272fba2a08b1","rows":[[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":"greyBandeau"},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":"Rechercher une demande"},"level":{"type":"constant","value":"Level 4"},"alignment":{"type":"constant","value":"center"}},"reference":"3f648aaa-0978-4106-9ed6-8c51f8c3f80f","id":"pbTitle"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":""},"level":{"type":"constant","value":"Level 2"},"alignment":{"type":"constant","value":"left"}},"reference":"c611073e-b74a-4103-8d97-4758437da6f5","id":"pbTitle"}],[{"type":"container","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"repeatedCollection":{"type":"variable"}},"reference":"d043a3eb-6545-40f8-9718-856ad1760d4d","rows":[[{"type":"component","dimension":{"xs":12,"sm":12,"md":4,"lg":4},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"readOnly":{"type":"constant","value":false},"required":{"type":"constant","value":false},"labelHidden":{"type":"constant","value":false},"label":{"type":"interpolation","value":"Demandeur"},"labelPosition":{"type":"constant","value":"top"},"labelWidth":{"type":"constant","value":4},"placeholder":{"type":"interpolation"},"availableValues":{"type":"expression","value":"users"},"displayedKey":{"type":"constant","value":"fullName"},"returnKey":{"type":"constant","value":"userId"},"value":{"type":"variable","value":"filtres.demandeur"}},"reference":"d20ff60b-46a1-4db0-bb5b-cfc8238beae2","id":"customAutocompleteKey"},{"type":"component","dimension":{"xs":12,"sm":12,"md":4,"lg":4},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"disabled":{"type":"constant","value":false},"required":{"type":"constant","value":false},"labelHidden":{"type":"constant","value":false},"label":{"type":"interpolation","value":"Statut de la demande"},"labelPosition":{"type":"constant","value":"top"},"labelWidth":{"type":"constant","value":4},"placeholder":{"type":"interpolation","value":"Select an option"},"availableValues":{"type":"expression","value":"listeStatut"},"displayedKey":{"type":"constant"},"returnedKey":{"type":"constant"},"value":{"type":"variable","value":"filtres.statut"}},"reference":"a47d30a4-7d1e-4a39-9365-59322b620f76","id":"pbSelect"},{"type":"component","dimension":{"xs":12,"sm":12,"md":4,"lg":4},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"required":{"type":"constant","value":false},"minLength":{"type":"constant","value":""},"maxLength":{"type":"constant","value":""},"readOnly":{"type":"constant","value":false},"labelHidden":{"type":"constant","value":false},"label":{"type":"interpolation","value":"Numéro de la demande"},"labelPosition":{"type":"constant","value":"top"},"labelWidth":{"type":"constant","value":4},"placeholder":{"type":"interpolation"},"value":{"type":"variable","value":"filtres.caseId"},"type":{"type":"constant","value":"number"},"min":{"type":"constant"},"max":{"type":"constant"},"step":{"type":"constant","value":1}},"reference":"7a5ce8f7-4f41-4c19-86e1-66bcc07c2f8e","id":"pbInput"}],[{"type":"fragment","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false}},"reference":"5dd23b80-8ce0-4795-9d6f-0f33bf67c89b","id":"b050de3c-44b6-4ba9-92b0-e7ff02231727","binding":{"demande":"filtres","readOnly":"false","mandatory":"false","allValues":"true"}}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":6,"lg":6},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"readOnly":{"type":"constant","value":false},"required":{"type":"constant","value":false},"labelHidden":{"type":"constant","value":false},"label":{"type":"interpolation","value":"Date début"},"labelPosition":{"type":"constant","value":"top"},"labelWidth":{"type":"constant","value":4},"placeholder":{"type":"interpolation","value":"Enter a date (dd/mm/yyyy)"},"value":{"type":"variable","value":"filtres.dateDebut"},"dateFormat":{"type":"constant","value":"dd/MM/yyyy"},"showToday":{"type":"constant","value":true}},"reference":"0aef46c0-64f0-4532-9a7d-665b4859bb0f","id":"pbDatePicker"},{"type":"component","dimension":{"xs":12,"sm":12,"md":6,"lg":6},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"readOnly":{"type":"constant","value":false},"required":{"type":"constant","value":false},"labelHidden":{"type":"constant","value":false},"label":{"type":"interpolation","value":"Date fin"},"labelPosition":{"type":"constant","value":"top"},"labelWidth":{"type":"constant","value":4},"placeholder":{"type":"interpolation","value":"Enter a date (dd/mm/yyyy)"},"value":{"type":"variable","value":"filtres.dateFin"},"dateFormat":{"type":"constant","value":"dd/MM/yyyy"},"showToday":{"type":"constant","value":true}},"reference":"f8f9ef63-4c74-42a3-afbc-51f3b5eb81b9","id":"pbDatePicker"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":8,"lg":8},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"disabled":{"type":"constant","value":false},"label":{"type":"interpolation","value":"Reinitialiser les filtres"},"alignment":{"type":"constant","value":"right"},"buttonStyle":{"type":"constant","value":"primary"},"objectToNullify":{"type":"variable","value":"filtres"}},"reference":"42f0e320-261d-4c32-addd-afe75cc860f2","id":"customButtonCloseModal"},{"type":"component","dimension":{"xs":12,"sm":12,"md":4,"lg":4},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"disabled":{"type":"constant","value":false},"label":{"type":"interpolation","value":"<i class=\"glyphicon glyphicon-search\"></i> Rechercher les demandes"},"alignment":{"type":"constant","value":"right"},"buttonStyle":{"type":"constant","value":"primary"},"action":{"type":"constant","value":"POST"},"url":{"type":"interpolation","value":"../API/extension/rechercheDemandeService"},"dataToSend":{"type":"expression","value":"filtres"},"dataFromSuccess":{"type":"variable","value":"demandes"},"dataFromError":{"type":"variable","value":"searchError"},"targetUrlOnSuccess":{"type":"interpolation"},"collectionToModify":{"type":"variable"},"collectionPosition":{"type":"constant","value":"Last"},"valueToAdd":{"type":"constant"},"removeItem":{"type":"variable"}},"reference":"d8d915c0-27a1-480f-9126-d01020d0ae28","id":"pbButton"}]]}],[{"type":"container","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"expression","value":"demandes == undefined || demandes.length == 0"},"repeatedCollection":{"type":"variable"}},"reference":"5d1591dc-4106-4733-aa04-61fda9fe1c84","rows":[[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"headers":{"type":"constant","value":["Numéro","Nom/Prénom du demandeur","Famille","Libéllé","Date de dernière modification","Statut"]},"type":{"type":"constant","value":"Variable"},"apiUrl":{"type":"constant","value":"../API/"},"params":{"type":"constant"},"content":{"type":"expression","value":"demandes"},"columnsKey":{"type":"constant","value":["caseId","fullNameDemandeur","familleDemande","libelleDemande","dateDerniereModif | date:'dd/MM/yyyy'","statutDemande"]},"sortColumns":{"type":"constant"},"selectedRow":{"type":"variable","value":"demandeSelectionnee"},"pageSize":{"type":"constant","value":5},"filter":{"type":"constant"},"attToCheck":{"type":"constant","value":"statutDemande"},"stylesRow":{"type":"expression","value":"stylesStatut"}},"reference":"15b04d35-7950-4bb2-84ee-7a99b2be1893","id":"customStyledDatatable"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"disabled":{"type":"constant","value":false},"label":{"type":"interpolation","value":"<i class=\"glyphicon glyphicon-export\"></i> Exporter"},"alignment":{"type":"constant","value":"right"},"buttonStyle":{"type":"constant","value":"primary"},"filename":{"type":"constant","value":"export.csv"},"exportedData":{"type":"expression","value":"prepareDataToExport"},"header":{"type":"expression","value":"exportHeader"}},"reference":"c30ab7aa-4a9c-450c-aec6-0698b2d457cf","id":"customExportExcel"}]]}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"expression","value":"demandes.length > 0 || demandes == undefined"},"text":{"type":"interpolation","value":"<i class=\"glyphicon glyphicon-warning-sign\"></i> Nous n'avons trouvé aucune demande."},"alignment":{"type":"constant","value":"center"}},"reference":"823d358d-4d54-4662-bcb0-220bf2f34128","id":"pbText"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"expression","value":"!searchError"},"text":{"type":"interpolation","value":"Une erreur s'est produite : <pre>{{searchError | json}}"},"alignment":{"type":"constant","value":"left"}},"reference":"a558a09e-67f0-4548-89e0-e4b7ea0b4ab5","id":"pbText"}]]}],[{"type":"container","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":"Modal-overlay"},"hidden":{"type":"expression","value":"demandeSelectionnee == undefined || !demandeSelectionnee.hasOwnProperty('persistenceId')"},"repeatedCollection":{"type":"variable","value":""}},"reference":"35829032-03e6-41ae-99f8-82256a276f65","rows":[[{"type":"container","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":"Modal-content"},"hidden":{"type":"constant","value":false},"repeatedCollection":{"type":"variable"}},"reference":"89b2df56-a779-4aff-a4dd-89b25ce76a41","rows":[[{"type":"fragment","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false}},"reference":"980854fb-3ba0-4674-bee5-c1d974b07bb2","id":"ececc248-4880-44fd-982e-8da04e608129","binding":{"demandeSelectionnee":"demandeSelectionnee","userId":"session.user_id"}}],[{"type":"fragment","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":"demandeClass"},"hidden":{"type":"constant","value":false}},"reference":"30283aca-843d-409d-9bca-9a715a65470c","id":"0e4494d6-dbb5-4634-9cf7-b9ece8093f2e","binding":{"readOnly":"true","idDemandeur":"","demande":"demandeSelectionnee"}}],[{"type":"fragment","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false}},"reference":"45ed536b-a7d7-49e9-9b25-a252ed4903f9","id":"1dd01536-e69a-41e9-b314-65f7ac5f825d","binding":{"demande":"demandeSelectionnee","readOnly":"true","comment":"","context":"buildCaseDocs","formInput":""}}]]}]]}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":true},"text":{"type":"interpolation","value":"<pre>{{filtres | json}}"},"alignment":{"type":"constant","value":"left"}},"reference":"a8656bee-5b50-4c60-a393-b5a94bbbe99d","id":"pbText"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":"<pre>{{demandeSelectionnee | json}}"},"alignment":{"type":"constant","value":"left"}},"reference":"c1f11e77-e2dd-456f-9098-0d99a8262798","id":"pbText"}]],"assets":[{"id":"11199431-68bb-4b62-a524-d2fa25819267","name":"localization.json","type":"json","order":0,"external":false},{"id":"ee0a5edc-c910-43d2-a396-b9be364745ba","name":"/bonita/portal/resource/app/conciergerie/cdn/content/assets/css/conciergerie.css","type":"css","order":1,"external":true}],"inactiveAssets":[],"data":{"session":{"type":"url","value":"../API/system/session/1","exposed":false},"demandeSelectionnee":{"type":"constant","exposed":false},"tachesParCase":{"type":"url","value":"../API/bpm/humanTask?p=0&c=10&f=caseId={{demandeSelectionnee.caseId}}&f=assigned_id={{session.user_id}}&f=state=ready","exposed":false},"prepareDataToExport":{"type":"expression","value":"var dateFilter = angular.injector([\"ng\"]).get(\"dateFilter\");\nvar exportedData = angular.copy($data.demandes);\nangular.forEach(exportedData, function(demande){\n\t\t\tdelete demande.persistenceId_string;\n\t\t\tdelete demande.persistenceId;\n\t\t\tdelete demande.persistenceVersion;\n\t\t\tdelete demande.persistenceVersion_string;\n\t\t\tdelete demande.idDemandeur;\n\t\t\tdelete demande.echanges;\n\t\t\tdelete demande.detailDemande;\n\t\t\tdelete demande.caseId_string;\n\t\t\tdemande.dateDerniereModif = dateFilter(demande.dateDerniereModif, 'dd/MM/yyyy');\n\t\t});\nreturn exportedData;","exposed":false},"filtres":{"type":"json","value":"{\n    \"demandeur\" : -1,\n    \"caseId\" : null,\n    \"familleDemande\" : \"Tous\",\n    \"sousFamilleDemande\" : \"Tous\",\n    \"statut\" : \"Tous\",\n    \"dateDebut\" : \"\",\n    \"dateFin\" : \"\"\n}","exposed":false},"listeStatut":{"type":"json","value":"[\"Demande en cours de traitement\",\n\"En attente d’information de l’utilisateur\",\n\"Demande en attente de validation\",\n\"Annulation demandée\",\n\"Demande annulée par l’utilisateur\",\n\"En attente du devis\",\n\"Validation du devis par l’utilisateur\",\n\"Prise de rendez-vous en cours\",\n\"Rendez-vous confirmé\",\n\"Votre article vous attend à la conciergerie\",\n\"Votre preuve de dépôt vous attend à la conciergerie\",\n\"En attente de paiement\",\n\"Demande traitée, en attente de résultat\",\n\"Prestation terminée\",\n\"Prestation refusée\", \"Tous\"]","exposed":false},"users":{"type":"url","value":"../API/extension/usersAndIds?p=0&c=2000","exposed":false},"searchError":{"type":"constant","exposed":false},"demandes":{"type":"url","value":"../API/bdm/businessData/fr.bonitasoft.modele.DemandeConciergerie?q=allDemandesEnCours&p=0&c=500","exposed":false},"exportHeader":{"type":"json","value":"{\"fullNameDemandeur\" : \"Demandeur\", \"statutDemande\": \"Statut de la demande\",\"caseId\":\"Numéro de la demande\", \"familleDemande\" : \"Famille\", \"sousFamilleDemande\":\"Sous Famille\",\"dateDerniereModif\": \"Date de dernière modification\",\"libelleDemande\": \"Libéllé de la demande\"}","exposed":false},"echanges":{"type":"url","value":"../API/extension/echanges?demandeId={{demandeSelectionnee.persistenceId}}","exposed":false},"buildEchanges":{"type":"expression","value":"if ($data.demandeSelectionnee && $data.echanges){\n    $data.demandeSelectionnee.echanges = $data.echanges;\n}\nreturn \"\";","exposed":false},"piecesJointes":{"type":"url","value":"../API/bpm/caseDocument?p=0&c=20&f=caseId={{demandeSelectionnee.caseId}}&f=name=piecesJointes","exposed":false},"carteGrise":{"type":"url","value":"../API/bpm/caseDocument?p=0&c=10&f=caseId={{demandeSelectionnee.caseId}}&f=name=carteGrise","exposed":false},"buildCaseDocs":{"type":"expression","value":"return {\n    'piecesJointes_ref' : $data.piecesJointes,\n    'carteGrise_ref' : $data.carteGrise\n};","exposed":false},"stylesStatut":{"type":"json","value":"{\n    \"Demande en attente de validation\" : \"warning\",\n    \"Annulation demandée\" : \"danger\"\n}","exposed":false}}}