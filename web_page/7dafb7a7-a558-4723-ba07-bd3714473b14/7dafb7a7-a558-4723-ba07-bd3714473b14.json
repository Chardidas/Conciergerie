{"designerVersion":"1.3.25","favorite":false,"id":"7dafb7a7-a558-4723-ba07-bd3714473b14","name":"utilisateurReservations","type":"page","lastUpdate":1519415874988,"rows":[[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":"{{creationNouvelleReservationURL}}"},"alignment":{"type":"constant","value":"left"}},"reference":"913fc797-d077-4476-8bdb-57ff0a92fc99","id":"pbText"}],[{"type":"container","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"expression","value":"offreDisponibles && offreDisponibles.length === 0"},"repeatedCollection":{"type":"variable"}},"reference":"09790332-9e5f-4081-9a1e-32d3ef0a8730","rows":[[{"type":"component","dimension":{"xs":12,"sm":12,"md":11,"lg":6},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"disabled":{"type":"constant","value":false},"required":{"type":"constant","value":false},"labelHidden":{"type":"constant","value":false},"label":{"type":"interpolation","value":"Demander une nouvelle réservation"},"labelPosition":{"type":"constant","value":"top"},"labelWidth":{"type":"constant","value":4},"placeholder":{"type":"interpolation","value":""},"availableValues":{"type":"expression","value":"offreDisponibles"},"displayedKey":{"type":"constant","value":"type + \" - \" + id"},"returnedKey":{"type":"constant"},"value":{"type":"variable","value":"reservationSelectionnee"}},"reference":"a362a1af-7e64-4d4e-81d7-3b2a018ea0da","id":"pbSelect"},{"type":"component","dimension":{"xs":12,"sm":12,"md":1,"lg":6},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"expression","value":"!reservationSelectionnee"},"text":{"type":"interpolation","value":">"},"targetUrl":{"type":"expression","value":"creationNouvelleReservationURL"},"target":{"type":"constant","value":"_self"},"alignment":{"type":"constant","value":"center"},"buttonStyle":{"type":"constant","value":"success"}},"reference":"9787457f-f555-491a-9549-e90a507d2ab3","id":"pbLink"}]]}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":"Mes réservations"},"level":{"type":"constant","value":"Level 2"},"alignment":{"type":"constant","value":"left"}},"reference":"81fd26be-517c-4012-a56f-f27ac2cbeb31","id":"pbTitle"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"headers":{"type":"expression","value":"entetes"},"type":{"type":"constant","value":"Bonita API"},"apiUrl":{"type":"expression","value":"mesResasURL"},"params":{"type":"constant"},"content":{"type":"constant"},"columnsKey":{"type":"expression","value":"cles"},"sortColumns":{"type":"constant"},"selectedRow":{"type":"variable"},"pageSize":{"type":"constant","value":10},"filter":{"type":"constant"}},"reference":"3682f635-a144-47fd-b047-ef7f411bb0b5","id":"pbDataTable"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":"text-danger"},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":"Pour toute modification, appelez le 05 49 73 84 85 ou écrivez par mail à l’adresse suivante conciergerie_noron@maif.fr"},"alignment":{"type":"constant","value":"center"}},"reference":"59e5866c-84c3-45d8-a2b6-a9265b35ec47","id":"pbText"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":true},"text":{"type":"interpolation","value":"<pre>{{mesResas | json}}"},"alignment":{"type":"constant","value":"left"}},"reference":"e82a1419-6285-44ca-880c-4677073e6c02","id":"pbText"}]],"assets":[{"id":"c08def84-24db-4db4-b64a-2e888b727590","name":"conciergerie.css","type":"css","order":1,"external":false},{"id":"82046a3a-c21d-4b91-8e3d-17d5e3a4232a","name":"prixTotalFilter.js","type":"js","order":5,"external":false},{"id":"2f4703db-42ef-46d5-aacf-5404ea374535","name":"localization.json","type":"json","order":0,"external":false},{"id":"425d8010-8525-4b87-ad9b-7614ff519808","name":"boi.js","type":"js","order":3,"external":false},{"id":"30561dca-e03f-4814-b68a-79d6b74b3e77","name":"moment.js","type":"js","order":2,"external":false}],"inactiveAssets":[],"data":{"session":{"type":"url","value":"../API/system/session/1","exposed":false},"offresActuelles":{"type":"url","value":"../API/bdm/businessData/fr.bonitasoft.modele.OffreReservation?q=findByCurrentDate&p=0&c=10","exposed":false},"reservationSelectionnee":{"type":"constant","exposed":false},"creationNouvelleReservationURL":{"type":"expression","value":"return \"/bonita/portal/form/process/\" + encodeURIComponent($data.nomProcessus) + \"/\" + encodeURIComponent($data.versionProcessus) + \"/?offreId=\" + $data.reservationSelectionnee.persistenceId;","exposed":false},"nomProcessus":{"type":"constant","value":"Gestion d'une demande de reservation","exposed":false},"versionProcessus":{"type":"constant","value":"1.0","exposed":false},"mesResasURL":{"type":"expression","value":"return \"../API/bdm/businessData/fr.bonitasoft.modele.ReservationConciergerie?q=findByIdDemandeur&p=0&c=10&f=idDemandeur=\" + $data.session.user_id;","exposed":false},"mesResas":{"type":"url","value":"{{mesResasURL}}","exposed":false},"entetes":{"type":"json","value":"[\n    \"Numero\", \n    \"Offre\",\n    \"Date\",\n    \"Prix total\",\n    \"Status\"\n]","exposed":false},"cles":{"type":"json","value":"[\n    \"persistenceId\",\n    \"offre.type + ' - ' + offre.id\",\n    \"dateDemande | date : 'yyyy/MM/dd'\",\n    \"panier | prixTotalPanier\",\n    \"offre.status\"\n]","exposed":false},"actions":{"type":"expression","value":"return [\r\n    {\r\n    \t\"name\": \"Modify\",\r\n    \t\"glyphicon\": \"edit\",\r\n    \t\"disabled\": function(row) {\r\n    \t    return row.offre.dateFin > new Date();\r\n    \t},\r\n    \t\"href\": function(row) {\r\n    \t    return \"/\" + row.id;\r\n    \t},\r\n    \t\"target\": function(row) {\r\n    \t    return \"_blank\";\r\n    \t}\r\n    }\r\n];","exposed":false},"offreDisponibles":{"type":"expression","value":"if($data.offresActuelles !== undefined && $data.mesResas !== undefined) {\n    return $data.offresActuelles.filter(function(item) {\n        // Seulement les offres non deja reservee\n        return !$data.mesResas.find(function(element) {\n            return item.persistenceId === element.offre.persistenceId;\n        });\n    });\n}\n","exposed":false}}}