{"designerVersion":"1.2.19","favorite":false,"id":"198d7969-0504-4297-9746-941a5039c9cb","name":"Export","type":"page","lastUpdate":1519426883955,"rows":[[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"disabled":{"type":"constant","value":false},"required":{"type":"constant","value":false},"labelHidden":{"type":"constant","value":false},"label":{"type":"interpolation","value":"Select the process"},"labelPosition":{"type":"constant","value":"top"},"labelWidth":{"type":"constant","value":4},"placeholder":{"type":"interpolation","value":"Select an option"},"availableValues":{"type":"expression","value":"availableProcessUniqueNames"},"displayedKey":{"type":"constant","value":""},"returnedKey":{"type":"constant"},"value":{"type":"variable","value":"selectedProcess"}},"reference":"19841ea9-2be0-4034-84bd-f0764211ed8f","id":"pbSelect"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"expression","value":"!selectedProcess"},"disabled":{"type":"constant","value":false},"label":{"type":"interpolation","value":"Export as CSV"},"alignment":{"type":"constant","value":"center"},"buttonStyle":{"type":"constant","value":"primary"},"action":{"type":"constant","value":"GET"},"url":{"type":"interpolation","value":"../API/extension/exporter?name={{selectedProcess}}"},"dataToSend":{"type":"constant"},"dataFromSuccess":{"type":"variable","value":"csvSuccess"},"dataFromError":{"type":"variable","value":"csvError"},"targetUrlOnSuccess":{"type":"interpolation"},"collectionToModify":{"type":"variable"},"collectionPosition":{"type":"constant","value":"Last"},"valueToAdd":{"type":"constant"},"removeItem":{"type":"variable"}},"reference":"c8b91cf0-3cd5-4e9f-a78f-0e8422fe00aa","id":"pbButton"}]],"assets":[{"id":"14d863ba-cef5-4de3-8dec-8bb2f8fd0c90","name":"base64-js.js","type":"js","order":2,"external":false},{"id":"62c6339f-5ea3-449a-952f-dfc081fa1fb5","name":"localization.json","type":"json","order":0,"external":false},{"id":"3afaaf60-77bd-4f88-a7c8-bd4990ca5e08","name":"FileSaver.min.js","type":"js","order":1,"external":false}],"inactiveAssets":[],"data":{"loggedUser":{"type":"url","value":"../API/system/session/1","exposed":false},"getAvailableProcessesURL":{"type":"url","value":"../API/bpm/process?c=1000&f=supervisor_id={{loggedUser.user_id}}&o=displayName+ASC&p=0","exposed":false},"selectedProcess":{"type":"constant","exposed":false},"availableProcessUniqueNames":{"type":"expression","value":"var distinctProcessNames = [];\nangular.forEach($data.getAvailableProcessesURL, function(element){\n  if(distinctProcessNames.indexOf(element.name) === -1) {\n    distinctProcessNames.push(element.name);\n  }\n});\n\nreturn distinctProcessNames;","exposed":false},"csvSuccess":{"type":"constant","exposed":false},"csvError":{"type":"constant","exposed":false},"autoSave":{"type":"expression","value":"if($data.csvSuccess && $data.csvSuccess.result) {\n    // decode base64\n    var decoded = toByteArray($data.csvSuccess.result);\n    \n    // Save to file\n    saveAs(new Blob([decoded], { type: 'text/plain;charset=utf-8' }), 'Exporter_CP_' + $data.selectedProcess + '_' + (new Date()).getTime() + '.csv');\n\n    $data.csvSuccess = undefined;\n}","exposed":false}}}